//- Copyright (C) 2023 Beijing Huaxia Chunsong Technology Co., Ltd. 
//- <https://www.chatopera.com>, Licensed under the Chunsong Public 
//- License, Version 1.0  (the "License"), https://docs.cskefu.com/licenses/v1.html
//- Unless required by applicable law or agreed to in writing, software
//- distributed under the License is distributed on an "AS IS" BASIS,
//- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//- See the License for the specific language governing permissions and
//- limitations under the License.
extends /admin/include/layout.pug
block content
    .row: .col-lg-12
        h1.site-h1(style='background-color:#FFFFFF;')
            | 使用授权证书列表 (#{licenses.size()})
            | ，更新时间 #{pugHelper.formatDate('yyyy-MM-dd HH:mm:ss', updateTime)}
            span(style='float:right;')
                button.layui-btn.layui-btn-small.green(href='/admin/license/add.html', data-toggle='ajax', data-width='550', data-height='450', data-title='添加使用授权证书')
                    | 添加使用授权证书

        .row(style='padding:5px;')
            .col-lg-12
                table.layui-table(lay-skin='line')
                    colgroup
                        col(width='10%')
                        col(width='10%')
                        col(width='15%')
                        col(width='10%')
                        col(width='15%')
                        col(width='10%')
                        col(width='10%')
                        col(width='1%')
                    thead
                        tr
                            th 证书标识
                            th 产品标识
                            th 产品名称
                            th 有效期截止
                            th 配额剩余
                            th 所属人昵称
                            th 添加时间
                            th(style='white-space:nowrap;', nowrap) 操作
                    tbody
                        for item in licenses
                            tr
                                td= pugHelper.messupStringWithStars(item.license.shortId)
                                td= item.product.shortId
                                td= item.product.name
                                td= item.license.effectivedateend
                                td= item.license.quotaeffectiveremaining
                                td= item.user.nickname
                                td= pugHelper.formatDate('yyyy-MM-dd HH:mm:ss', item.addDate)
                                td(style="white-space:nowrap;" nowrap="nowrap")
                                    a(href="/admin/license/edit.html?id=" + item.license.shortId, data-toggle="ajax",  data-width="550", data-height="450", data-title="编辑使用授权证书")
                                        i.layui-icon &#xe642;
                                        span 编辑
                                    a(href="/admin/license/delete.html?id=" + item.license.shortId style="margin-left:10px;" data-toggle="tip"  title="请确认是否删除使用授权证书？")
                                        i.layui-icon(style="color:red;") &#x1006;
                                        span 删除
        .row(style='padding:5px;')
            .col-lg-12#page(style='text-align:center;')

    script.
        layui.use(['laypage', 'layer'], function () {
            var laypage = layui.laypage
                , layer = layui.layer;

            // laypage({
            //     cont: 'page'
            //     , pages: #{emailList.totalPages} //总页数
            //     , curr: #{emailList.number + 1}
            //     , groups: 5 //连续显示分页数
            //     , jump: function (data, first) {
            //         if (!first) {
            //             location.href = "/admin/email/index.html?p=" + data.curr;
            //         }
            //     }
            // });
        });

